 

The **defclass** form for a *class* provides a total ordering on that *class* and its direct *superclasses*. This ordering is called the *local precedence order*. It is an ordered list of the *class* and its direct *superclasses*. The *class precedence list* for a class *C* is a total ordering on *C* and its *superclasses* that is consistent with the *local precedence orders* for each of *C* and its *superclasses*. 

A *class* precedes its direct *superclasses*, and a direct *superclass* precedes all other direct *superclasses* specified to its right in the *superclasses* list of the **defclass** form. For every class *C*, define 

&#60;i&#62;R&#60;sub&#62;C&#60;/sub&#62;&#60;/i&#62; = &#60;i&#62;&#123;&#60;/i&#62;(&#60;i&#62;C, C&#60;/i&#62;&#60;sub&#62;1&#60;/sub&#62;)&#60;i&#62;,&#60;/i&#62;(&#60;i&#62;C&#60;/i&#62;&#60;sub&#62;1&#60;/sub&#62;&#60;i&#62;, C&#60;/i&#62;&#60;sub&#62;2&#60;/sub&#62;)&#60;i&#62;, . . . ,&#60;/i&#62;(&#60;i&#62;C&#60;sub&#62;n−&#60;/sub&#62;&#60;/i&#62;1&#60;/sub&#62;&#60;i&#62;, C&#60;sub&#62;n&#60;/sub&#62;&#60;/i&#62;)&#60;i&#62;&#125;&#60;/i&#62; 

where &#60;i&#62;C&#60;/i&#62;&#60;sub&#62;1&#60;/sub&#62;&#60;i&#62;, . . . , C&#60;sub&#62;n&#60;/sub&#62;&#60;/i&#62; are the direct &#60;i&#62;superclasses&#60;/i&#62; of &#60;i&#62;C&#60;/i&#62; in the order in which they are mentioned in the &#60;b&#62;defclass&#60;/b&#62; form. These ordered pairs generate the total ordering on the class &#60;i&#62;C&#60;/i&#62; and its direct &#60;i&#62;superclasses&#60;/i&#62;. 

Let &#60;i&#62;S&#60;sub&#62;C&#60;/sub&#62;&#60;/i&#62; be the set of &#60;i&#62;C&#60;/i&#62; and its &#60;i&#62;superclasses&#60;/i&#62;. Let &#60;i&#62;R&#60;/i&#62; be 

&#60;i&#62;R&#60;sub&#62;c&#60;/sub&#62;&#60;/i&#62; 

. 

&#60;sub&#62;&#60;i&#62;R&#60;/i&#62; =&#60;/sub&#62;[ &#60;i&#62;c∈S&#60;sub&#62;C&#60;/sub&#62;&#60;/i&#62; 

The set &#60;i&#62;R&#60;/i&#62; might or might not generate a partial ordering, depending on whether the &#60;i&#62;R&#60;sub&#62;c&#60;/sub&#62;&#60;/i&#62;, &#60;i&#62;c ∈ S&#60;sub&#62;C&#60;/sub&#62;&#60;/i&#62; , are consistent; it is assumed that they are consistent and that &#60;i&#62;R&#60;/i&#62; generates a partial ordering. When the &#60;i&#62;R&#60;sub&#62;c&#60;/sub&#62;&#60;/i&#62; are not consistent, it is said that &#60;i&#62;R&#60;/i&#62; is inconsistent. 

To compute the &#60;i&#62;class precedence list&#60;/i&#62; for &#60;i&#62;C&#60;/i&#62;, topologically sort the elements of &#60;i&#62;S&#60;sub&#62;C&#60;/sub&#62;&#60;/i&#62; with respect to the partial ordering generated by &#60;i&#62;R&#60;/i&#62;. When the topological sort must select a &#60;i&#62;class&#60;/i&#62; from a set of two or more &#60;i&#62;classes&#60;/i&#62;, none of which are preceded by other &#60;i&#62;classes&#60;/i&#62; with respect to &#60;i&#62;R&#60;/i&#62;, the &#60;i&#62;class&#60;/i&#62; selected is chosen deterministically, as described below. 

If *R* is inconsistent, an error is signaled. 

